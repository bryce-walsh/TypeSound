<html>
    <head>
    	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src='https://surikov.github.io/webaudiofont/npm/dist/WebAudioFontPlayer.js'></script> 
        <script src='https://surikov.github.io/webaudiofontdata/sound/0330_GeneralUserGS_sf2_file.js'></script>
        <script src='https://surikov.github.io/webaudiofontdata/sound/0250_SoundBlasterOld_sf2.js'></script> 
        <script>
            var AudioContextFunc = window.AudioContext || window.webkitAudioContext;
            var audioContext = new AudioContextFunc();
            var player=new WebAudioFontPlayer();
            var currentNotes = new Map();
            var keyEnabledArray = Array(222).fill(true);
            var keydown = false;
            player.loader.decodeAfterLoading(audioContext, '_tone_0330_GeneralUserGS_sf2_file');
            
            function playNote(val){
                //player.queueWaveTable(audioContext, audioContext.destination
                //    , _tone_0250_SoundBlasterOld_sf2, 0, 12*4+val, 2);
                waveTableObject = player.queueWaveTable(audioContext, audioContext.destination
                    , _tone_0330_GeneralUserGS_sf2_file, 0, val, 2);
                console.log(waveTableObject);
                return waveTableObject;
            }

            $(document).ready(function() {
            	$("#demo").on('keydown', function(e) {
            		code = e.keyCode; 
			  		console.log(code);
            		if (!currentNotes.has(code)) {
			  			envelope = playNote(code);
			  			currentNotes.set(code, envelope);
			  		}
			  	});
			  	$("#demo").on('keyup', function(e) {
            		code = e.keyCode; 
			  		console.log(code);
			  		envelope = currentNotes.get(code);
			  		currentNotes.delete(code)
			  		envelope.cancel();
			  	});
			});

        </script> 
    </head>
    <body>
    	<input type="text" id="demo">
    </body>
</html>